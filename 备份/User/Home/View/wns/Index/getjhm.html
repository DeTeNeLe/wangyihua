<!-- header start -->
<include file="User/Home/View/wns/common_header.html" />
<!-- header end -->
<style type="text/css">
.demo{width:320px; margin:10px auto 20px auto; min-height:300px;}
.msg{text-align:center; height:32px; line-height:32px; font-weight:bold; margin-top:150px;color:white;font-size:15px;}
.see:link { font-size: 12px; color: white; text-decoration: none; } 
.see:visited { font-size: 12px; color: white; text-decoration: none; } 
.see:hover { font-size: 12px; color: white; text-decoration: underline; } 
.main
{
    background: url('/assets/wns/img/newbg.jpg') 50% 50% repeat #000;
    background-size: contain;height:100%;
	min-height:2000px;
    position: relative;
    overflow: hidden;}
</style>
<div class="main">
   <div class="msg">刮开灰色部分查看中奖结果,<a class="see" href="/Info/jhm">查看记录</a></div>
   <div class="demo">
   		<canvas></canvas>
   </div>
</div>
<script type="text/javascript">
var bodyStyle = document.body.style;

bodyStyle.mozUserSelect = 'none';
bodyStyle.webkitUserSelect = 'none';

var img = new Image();
var canvas = document.querySelector('canvas');
canvas.style.backgroundColor='transparent';
canvas.style.position = 'absolute';
var imgs = ['/assets/wns/img/getjhm/getjhm_0.jpg',
            '/assets/wns/img/getjhm/getjhm_1.jpg',
            '/assets/wns/img/getjhm/getjhm_2.jpg',
            '/assets/wns/img/getjhm/getjhm_3.jpg',
            '/assets/wns/img/getjhm/getjhm_4.jpg',
			'/assets/wns/img/getjhm/getjhm_5.jpg'];
//var num = Math.floor(Math.random()*3);
var num = {$randoum};
img.src = imgs[num];

img.addEventListener('load', function(e) {
	var ctx;
    var w = img.width,
    	h = img.height;
    var offsetX = canvas.offsetLeft,
    	offsetY = canvas.offsetTop;
    var mousedown = false;

    function layer(ctx) {
        ctx.fillStyle = 'gray';
        ctx.fillRect(0, 0, w, h);
    }

    function eventDown(e){
        e.preventDefault();
        mousedown=true;
    }

    function eventUp(e){
        e.preventDefault();
        mousedown=false;
    }

    function eventMove(e){
        e.preventDefault();
        if(mousedown) {
             if(e.changedTouches){
                 e=e.changedTouches[e.changedTouches.length-1];
             }
             var x = (e.clientX + document.body.scrollLeft || e.pageX) - offsetX || 0,
                 y = (e.clientY + document.body.scrollTop || e.pageY) - offsetY || 0;
             with(ctx) {
                 beginPath()
                 arc(x, y, 10, 0, Math.PI * 2);
                 fill();
             }
        }
    }

    canvas.width=w;
    canvas.height=h;
    canvas.style.backgroundImage='url('+img.src+')';
    ctx=canvas.getContext('2d');
    ctx.fillStyle='transparent';
    ctx.fillRect(0, 0, w, h);
    layer(ctx);

    ctx.globalCompositeOperation = 'destination-out';

    canvas.addEventListener('touchstart', eventDown);
    canvas.addEventListener('touchend', eventUp);
    canvas.addEventListener('touchmove', eventMove);
    canvas.addEventListener('mousedown', eventDown);
    canvas.addEventListener('mouseup', eventUp);
    canvas.addEventListener('mousemove', eventMove);
});
</script>
<script>
	(function(){
		document.title="抢激活码";
		//积分转账
    })();
</script>
<!-- footer start -->
<include file="User/Home/View/wns/common_footer.html" />
<!-- footer end -->